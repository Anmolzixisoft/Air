<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--favicon-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">

  <link rel="icon" href="../assets/images/favicon-32x32.png" type="image/png" />
  <!--plugins-->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.6/css/jquery.dataTables.min.css">

  <!-- DataTables Buttons CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.1.1/css/buttons.dataTables.min.css">

  <!-- DataTables JS -->
  <script type="text/javascript" src="https://cdn.datatables.net/1.11.6/js/jquery.dataTables.min.js"></script>
  <link href="../assets/plugins/vectormap/jquery-jvectormap-2.0.2.css" rel="stylesheet" />
  <link href="../assets/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
  <link href="../assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet" />
  <link href="../assets/plugins/metismenu/css/metisMenu.min.css" rel="stylesheet" />
  <!-- loader-->
  <link href="../assets/css/pace.min.css" rel="stylesheet" />
  <script src="../assets/js/pace.min.js"></script>
  <!-- Bootstrap CSS -->
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../assets/css/bootstrap-extended.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
  <link href="../assets/css/app.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="../assets/css/icons.css" rel="stylesheet" />
  <!-- Theme Style CSS -->
  <link rel="stylesheet" href="../assets/css/dark-theme.css" />
  <link rel="stylesheet" href="../assets/css/semi-dark.css" />
  <link rel="stylesheet" href="../assets/css/style.css" />
  <link rel="stylesheet" href="../assets/css/header-colors.css" />
  <link rel="stylesheet" href="../assets/css/responsive.css" />
  <title>My-Tech -Admin Panel</title>
</head>

<body>

  <!--wrapper-->
  <div class="wrapper">
    <!--sidebar wrapper -->

    <!--end sidebar wrapper -->
    <!--start header -->



    <!--end header -->
    <!--start page wrapper -->
    <div class="page-wrapper" style="margin: 10px 10px;">
      <div class="page-content">
        <div class="row">

          <div class="col-md-12">
            <div class="card mt-3">
              <div class="card-body">
                <!-- <div class="table-top">
                  <div class="search-set">
                    <div class="search-input-box">
                      <a class="btn-searchset"><i class="fa-solid fa-filter"></i>
                      </a>
                      <div id="" class="">
                        <label>
                          <input type="search" class="form-control form-control-sm" placeholder="Search..."
                            aria-controls="DataTables_Table_0" /></label>
                      </div>
                    </div>
                  </div>
                </div> -->
                <div class="delverystatustable">
                  <div class="table-responsive">
                    <table id="property-table" class="table">
                      <thead>
                        <tr role="row">
                          <th>S.No</th>
                          <th>Shipping_Bill_No</th>
                          <th>Shipping_Bill_Date</th>
                          <th>IEC</th>
                          <th>EXPORTER</th>
                          <th>EXPORTER_ADDRESS_AND_CITY</th>
                          <th>City</th>
                          <th>PIN</th>
                          <th>State</th>
                          <th>CONTACT_NO</th>
                          <th>E_MAIL_ID</th>
                          <th>CONSINEE</th>
                          <th>CONSINEE_ADDRESS</th>
                          <th>PORT_CODE</th>
                          <th>FOREIGN_PORT</th>
                          <th>FOREIGN_COUNTRY</th>
                          <th>HS_CODE</th>
                          <th>CHAPTER</th>
                          <th>PRODUCT_DESCRIPITION</th>
                          <th>QUANTITY</th>
                          <th>UNIT_QUANTITY</th>
                          <th>ITEM_RATE_IN_FC</th>
                          <th>CURRENCY</th>
                          <th>Total_Value_IN_FC</th>
                          <th>Unit_Rate_In_USD_Exchange</th>
                          <th>Exchange_Rate_USD</th>
                          <th>Total_Value_IN_USD_Exchange</th>
                          <th>Unit_Rate_in_INR</th>
                          <th>FOB_In_INR</th>
                          <th>INVOICE_SERIAL_NUMBER</th>
                          <th>INVOICE_NUMBER</th>
                          <th>ITEM_NUMBER</th>
                          <th>MONTH</th>
                          <th>YEAR</th>
                          <th>MODE</th>
                          <th>INDIAN_PORT</th>
                          <th>CUSH</th>

                        </tr>
                      </thead>
                      <tbody id="property-list">
                      </tbody>
                    </table>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--end page wrapper -->
    <!--start overlay-->

  </div>
  <!--end wrapper-->

  <!--  shipment modal -->




  <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> -->

  <!-- Bootstrap JS -->
  <script src="../assets/js/bootstrap.bundle.min.js"></script>
  <!--plugins-->
  <script src="../assets/js/jquery.min.js"></script>
  <script src="../assets/plugins/simplebar/js/simplebar.min.js"></script>
  <script src="../assets/plugins/metismenu/js/metisMenu.min.js"></script>
  <script src="../assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js"></script>
  <script src="../assets/plugins/vectormap/jquery-jvectormap-2.0.2.min.js"></script>
  <script src="../assets/plugins/vectormap/jquery-jvectormap-world-mill-en.js"></script>
  <script src="../assets/plugins/chartjs/js/chart.js"></script>
  <script src="../assets/js/index.js"></script>
  <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.2.min.js"></script>
  <script type="text/javascript" charset="utf8"
    src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
  <!--app JS-->
  <script type="text/javascript" src="https://cdn.datatables.net/buttons/2.1.1/js/dataTables.buttons.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/buttons/2.1.1/js/buttons.html5.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>


  <script src="../assets/js/app.js"></script>
  <script src="../utils.js"></script>
  <script>
    new PerfectScrollbar(".app-container");
  </script>
  <script>
    $(".fingsize")
      .addClass("img-enlargable")
      .click(function () {
        var src = $(this).attr("src");
        $("<div>")
          .css({
            background: "RGBA(0,0,0,.5) url(" + src + ") no-repeat center",
            backgroundSize: "contain",
            width: "100%",
            height: "100%",
            position: "fixed",
            zIndex: "10000",
            top: "0",
            left: "0",
            cursor: "zoom-out",
          })
          .click(function () {
            $(this).remove();
          })
          .appendTo("body");
      });
  </script>
  <script>






    const propertyList = document.getElementById('property-list');
    let count = 1;

    function fetchData() {

      const api = apiUrl + '/getdata';
      fetch(api, {
        method: 'get',
        headers: {
          'Content-Type': 'application/json',
        },
      })
        .then(response => {
          if (response.ok) {
            return response.json();
          } else {
            throw new Error('Failed to fetch data');
          }
        })
        .then(data => {
          console.log('Data received:', data.message);
          data.message.forEach(property => {
            const newRowData = createPropertyListing(property);
            $('#property-table').DataTable().row.add(newRowData).draw();
          });
        })


        .catch(error => {
          console.error('There was a problem with the fetch operation:', error);
        });
    }

    function createPropertyListing(property) {



      const tableRow = [
        count,

        property.Shipping_Bill_No,
        property.Shipping_Bill_Date,
        property.IEC,
        property.EXPORTER,
        property.EXPORTER_ADDRESS_AND_CITY,
        property.City,
        property.PIN,
        property.State,
        property.CONTACT_NO,
        property.E_MAIL_ID,
        property.CONSINEE,
        property.CONSINEE_ADDRESS,
        property.PORT_CODE,
        property.FOREIGN_PORT,
        property.FOREIGN_COUNTRY,
        property.HS_CODE,
        property.CHAPTER,
        property.PRODUCT_DESCRIPITION,
        property.QUANTITY,
        property.UNIT_QUANTITY,
        property.ITEM_RATE_IN_FC,
        property.CURRENCY,
        property.Total_Value_IN_FC,
        property.Unit_Rate_In_USD_Exchange,
        property.Exchange_Rate_USD,
        property.Total_Value_IN_USD_Exchange,
        property.Unit_Rate_in_INR,
        property.FOB_In_INR,
        property.INVOICE_SERIAL_NUMBER,
        property.INVOICE_NUMBER,
        property.ITEM_NUMBER,
        property.MONTH,
        property.YEAR,
        property.MODE,
        property.INDIAN_PORT,
        property.CUSH,
      ];

      count++;
      return tableRow;
    }



    // window.onload = fetchData;
    $(document).ready(function () {
      // Initialize DataTable with options
      $('#property-table').DataTable({
        dom: 'lBfrtip', // 'l' adds the "Show 50 entries" dropdown
        lengthMenu: [5, 10, 25, 50, 100], // Customize the entries dropdown options
        buttons: [
          'copy', 'csv', 'excel', 'pdf'
        ],
      });


      fetchData(); // Call your existing fetchData function
    });


  </script>
</body>

</html>